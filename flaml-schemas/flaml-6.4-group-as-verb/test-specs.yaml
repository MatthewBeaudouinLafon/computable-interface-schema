# This file provides a list of specifications for testing purposes
- $name: imessage
# ios messages
- conversations:
    group foreach:
      - messages
      - people:
          groups: messages

- (gui) chat-view:
    /marks <>: conversations.active->messages
    /encoding.vstack <>:
      (linear) time:
        affects: messages, conversations

- (gui) convo-view:
    /marks.text <>: conversations
    /encoding.cluster <>:
      pin:
        groups: conversations
    /encoding.vstack <>: time

- (action) send-message:
    create: conversations.active->messages
    directions: time

- (action) select-conversation:
    update: conversations.active subsets> conversations

---
# Slack
- $name: slack
- channels:
    group foreach:
      - name
      - messages
      - people

- people:
    groups: messages

- (linear) time:
    affects: messages

- (gui) channel-view:
    /encoding.vstack <>:
      (linear) alphabetical:
        affects: channels
    /encoding.cluster <>:
      channel-type:
        groups: channels
        subgroups: channels.dm, channels.!dm
    /marks <>: channels

- (gui) chat-view:
    /marks.text <>: channels.active->messages
    /encoding.vstack <>: time

- (action) send-message:
    create: channels.active->messages
    directions: time

- (action) select-channel:
    update: channels.active subset> channels

---
- $name: calendar
# Google Calendar
- (gui) week-view:
    /marks.hline <>: weeks.active->timestamps
    /marks.rectangles <>: weeks.active->events
    /encoding.vstack <>:
      (linear) time:
        affects: timestamps
        covers: events, days, weeks, months
    /encoding.cluster <>: days

- (gui) mini-month-view:
    /marks.text <>: months.selected->days
    /encoding.hwrap <>: time

- (action) create-event:
    create: events

- (action) delete-event:
    delete: events

- (action) move-event:
    update: time covers> events.selected
    directions: time

- (action) time-passing:
    update: timestamps.now subset> timestamps
    directions: time

---
- $name: video-editor
- def (video):
    group foreach:
      - /timestamps->/images
      - (linear) /timeline:
          affects: /images
          /first =: /images.first
          /backwards:
            affects: /images

- (video) videos

- editors:
    group foreach: # feels redundant if there's just one (but there could be more!!)
      - /videos =: videos.in-editor

      - (video) /videos:
          /timestamps <>: /timestamps
          /timeline <>: /timeline

      - (linear) /timeline:
          affects: /timestamps
          covers: /videos

      - (gui) /view:
          /marks.vline <>:
            - /timestamps
            - (action) /move-playhead:
                update: /timestamps.playhead subset> /timestamps
          /marks.rectangles <>:
            - /videos
            - (action) /select-video:
                update: /videos.selected subset> /videos
          /encoding.hstack <>: /timeline
          /encoding.cluster <>:
            /tracks:
              groups: /videos

      - (action) play:
          update: /timestamps.playhead subset> /timestamps
          directions: /timeline

      - (action) move-video:
          update: /timeline covers> /videos.selected
          direction: /timeline

- (gui) media-pool:
    /marks <>: videos
    /encoding.hwrap <>:
      (linear) sort-order:
        affects: videos

- def (video-player):
    arguments: (video) /video, /playhead
    group foreach:
      - (gui) image-view:
          /marks.image <>: video/images.current
      - (gui) scrubber-view:
          /marks.points <>: video/timestamps
          /marks.icon <>: playhead->video/timestamps
          /encoding.hstack <>: video/timeline
      - (gui) view:
          /marks <>: image-view and scrubber-view
          /encoding.vstack <>: _

- (video-player) timeline-preview:
    /video =: editors/composited-video # kind of a hack?
    /playhead =: editors.current/timestamps.playhead

- (video-player) media-preview:
    /video =: videos.selected
    # what happens to the playhead?
